---
description: NEWXMEM 매칭/거래 연동 규칙 - 연동은 매칭 확인 후 거래 시에만, 나머지는 회원별 독립
globs: "**/App.tsx","**/simulator/**/*.tsx"
alwaysApply: false
---

# 회원별 독립 vs 연동 규칙

## 매칭 방식

- **기본**: 이 프로젝트는 **1:1 매칭**을 주로 한다.
- **1:다중 매칭**: 1:1 매칭자가 없으면 **1:다중 매칭**을 한다.
  - **1:다중**이란 **구매자 1명 + 판매자 다수** 또는 **구매자 다수 + 판매자 1명**을 의미한다.
  - 즉, 구매자가 1이 될 수도 있고, 판매자가 1이 될 수도 있다.

## 원칙

- **상호 연동**: **매칭을 서로 확인하고 거래를 할 때만** 연동한다.
- **그 외**: **모든 동작은 회원(구매자/판매자)별로 독립**이다.

## 적용 예

- **연동하는 경우**
  - 양쪽이 매칭 확인 → 거래 단계 진입
  - 거래 완료 시 포인트/잔여 금액 반영
  - 양쪽이 "새 거래" 등으로 다음 거래 시작 시 상태 정리

- **독립인 경우**
  - 매칭 미확인 모달: 구매자 확인 → 구매자만 초기화, 판매자 확인 → 판매자만 초기화 (서로 연동 없음)
  - 매칭 시간 초과/거절: 해당 회원 화면만 갱신
  - 타이머, 입력, 버튼: 각 회원 화면에서만 반영

## 거래 종료 시점

- **거래가 끝나는 시점**: 판매자가 **입금확인** 모달에서 "입금을 확인하였습니다."에 체크하고 **확인**을 누르는 순간.
- 구매자·판매자 둘 다 거래완료 화면에서 "확인"을 눌러야 끝나던 방식은 사용하지 않음. 판매자 입금확인 한 시점에 즉시 거래 완료 처리.

새 기능이나 수정 시 위 원칙에 맞게 구현할 것.
